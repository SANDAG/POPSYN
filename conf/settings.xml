<?xml version="1.0" encoding="UTF-8"?>

<targets>
  <database>
    <server>sql2014a8</server>
    <type>MS_SQL</type>
    <!--<user></user>-->
    <password></password>
    <dbName>popsyn_3_0</dbName>
  </database>

  <!-- Specify the PUMS data table names from which PUMA incidence tables are generated, as well as the field name for a unique identifier and the PUMS weight field name -->
  <pumsData>
    <idField>hh_id</idField>
    <pumaFieldName>puma</pumaFieldName>
    <metaFieldName>region</metaFieldName>
    <tazFieldName>taz</tazFieldName>
    <mazFieldName>mgra</mazFieldName>
    <weightField>wgtp</weightField>
    <hhTable>[popsyn_input].[hh]</hhTable>
    <persTable>[popsyn_input].[person]</persTable>
    <pumsHhTable>[popsyn_input].[hh]</pumsHhTable>
    <pumsHhIdField>hh_id</pumsHhIdField>
    <pumsPersTable>[popsyn_input].[person]</pumsPersTable>
    <maxExpansionFactor>15</maxExpansionFactor>
    <synpopOutputHhTableName>[popsyn].[synpop_hh]</synpopOutputHhTableName>
    <synpopOutputPersTableName>[popsyn].[synpop_person]</synpopOutputPersTableName>
    <outputHhAttributes></outputHhAttributes>
    <outputPersAttributes>person_id</outputPersAttributes>
  </pumsData>

  <!-- Specify the table name and name of id field for the MAZ control totals table -->
  <mazControlsTable>
    <mazTable id="1">
      <table_name>[popsyn_input].[control_targets_mgra]</table_name>
      <id_field_name>mgra</id_field_name>
      <aggregation_level>mgra</aggregation_level>
    </mazTable>
  </mazControlsTable>

  <!-- Specify the table name and name of id field for the table of TAZ control totals that are not fields in the MAZ control total table -->
  <tazControlsTable>
    <tazTable id="1">
      <table_name>[popsyn_input].[control_targets_taz]</table_name>
      <id_field_name>taz</id_field_name>
      <aggregation_level>taz</aggregation_level>
    </tazTable>
  </tazControlsTable>

  <!-- Specify the table name, id field name, and aggregation level for each table of META control totals -->
  <metaControlsTables>
    <metaTable id="1">
      <table_name>[popsyn_input].[control_targets_region]</table_name>
      <id_field_name>region</id_field_name>
      <aggregation_level>puma</aggregation_level>
    </metaTable>
  </metaControlsTables>
  
    <!-- Total households in each MAZ Control#0 -->
  <target>
    <marginals>
      <id>0</id>
      <description>MGRA Level Control: Total Number of Households</description>
      <totalHouseholdsControl>true</totalHouseholdsControl>
      <controlType>simple</controlType>
      <geographyType>mgra</geographyType>
      <table>[popsyn_input].[hh]</table>
      <constraint id="1">
        <importance>1000000000</importance>
        <field>wgtp</field>
        <controlField>hh</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

    <!-- Define conditions for households by housing type Control#1 -->
    <!-- Four categories: Single family, Multi-family, Mobile home -->
  <target>
    <marginals>
      <id>1</id>
      <description>MGRA Control: Number of Households by household type</description>
      <geographyType>mgra</geographyType>
      <controlType>simple</controlType>
      <table>[popsyn_input].[hh]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>hh_type_id</field>
        <controlField>hh_sf</controlField>
        <type>equality</type>
        <value>1</value>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>hh_type_id</field>
        <controlField>hh_mf</controlField>
        <type>equality</type>
        <value>2</value>
      </constraint>
      <constraint id="3">
        <importance>1000</importance>
        <field>hh_type_id</field>
        <controlField>hh_mh</controlField>
        <type>equality</type>
        <value>3</value>
      </constraint>
    </marginals>
  </target>
  
  <target>
    <!-- Define conditions for population Control#2 -->
    <marginals>
      <id>2</id>
      <description>MGRA Control: Total Population</description>
      <geographyType>mgra</geographyType>
      <controlType>COUNT</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000000000</importance>
        <field>wgtp</field>
        <controlField>pop_non_gq</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

    <!-- Define conditions for 5 household income category constraints for households  Control#3 -->
    <!-- Five categories in 2010$s: (-Inf,30k),[30k,60k),[60k,100k),[100k,150k),[150k,+Inf) -->
   <target>
    <marginals>
      <id>3</id>
      <description>TAZ Level Control: Number of Households by Household Income</description>
      <geographyType>taz</geographyType>
      <controlType>simple</controlType>
      <table>[popsyn_input].[hh]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>hh_income_adj</field>
        <controlField>hh_income_cat_1</controlField>
        <type>interval</type>
        <lo_value>-999999999</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>30000</hi_value>
        <hi_type>open</hi_type>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>hh_income_adj</field>
        <controlField>hh_income_cat_2</controlField>
        <type>interval</type>
        <lo_value>30000</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>60000</hi_value>
        <hi_type>open</hi_type>
      </constraint>
      <constraint id="3">
        <importance>1000</importance>
        <field>hh_income_adj</field>
        <controlField>hh_income_cat_3</controlField>
        <type>interval</type>
        <lo_value>60000</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>100000</hi_value>
        <hi_type>open</hi_type>
      </constraint>
      <constraint id="4">
        <importance>1000</importance>
        <field>hh_income_adj</field>
        <controlField>hh_income_cat_4</controlField>
        <type>interval</type>
        <lo_value>100000</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>150000</hi_value>
        <hi_type>open</hi_type>
      </constraint>
       <constraint id="5">
        <importance>1000</importance>
        <field>hh_income_adj</field>
        <controlField>hh_income_cat_5</controlField>
        <type>interval</type>
        <lo_value>150000</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>999999999</hi_value>
        <hi_type>open</hi_type>
      </constraint>  
    </marginals>
  </target>

    <!-- Define conditions for households by number of workers in household Control#4 -->
    <!-- Four categories: 0,1,2,3+ worker HH -->
  <target>
    <marginals>
      <id>4</id>
      <description>TAZ Level Control: Number of Households by number of workers</description>
      <geographyType>taz</geographyType>
      <controlType>simple</controlType>
      <table>[popsyn_input].[hh]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>workers</field>
        <controlField>hhworkers0</controlField>
        <type>equality</type>
        <value>0</value>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>workers</field>
        <controlField>hhworkers1</controlField>
        <type>equality</type>
        <value>1</value>
      </constraint>
      <constraint id="3">
        <importance>1000</importance>
        <field>workers</field>
        <controlField>hhworkers2</controlField>
        <type>equality</type>
        <value>2</value>
      </constraint>
      <constraint id="4">
        <importance>1000</importance>
        <field>workers</field>
        <controlField>hhworkers3</controlField>
        <type>interval</type>
        <lo_value>3</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

    <!-- Define conditions for person age categories Control#5 -->
    <!-- Seven categories: 0-17,18-24,25-34,35-49,50-64,65-79,80+ -->
   <target>
    <marginals>
      <id>5</id>
      <description>TAZ Control: Number of persons by age group</description>
      <geographyType>taz</geographyType>
      <controlType>COUNT</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_0_17</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>17</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_18_24</controlField>
        <type>interval</type>
        <lo_value>18</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>24</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="3">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_25_34</controlField>
        <type>interval</type>
        <lo_value>25</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>34</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="4">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_35_49</controlField>
        <type>interval</type>
        <lo_value>35</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>49</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="5">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_50_64</controlField>
        <type>interval</type>
        <lo_value>50</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>64</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="6">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_65_79</controlField>
        <type>interval</type>
        <lo_value>65</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>79</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
      <constraint id="7">
        <importance>1000</importance>
        <field>agep</field>
        <controlField>age_80plus</controlField>
        <type>interval</type>
        <lo_value>80</lo_value>
        <lo_type>closed</lo_type>
        <hi_value>999999999</hi_value>
        <hi_type>closed</hi_type>
      </constraint>
    </marginals>
  </target>
  
    <!-- Define conditions for presence of children in the household Control#6 -->
    <!-- Two categories: No children, One or more children -->
  <target>
    <marginals>
      <id>6</id>
      <description>TAZ Control: Number of Households by presence of children</description>
      <geographyType>taz</geographyType>
      <controlType>simple</controlType>
      <table>[popsyn_input].[hh]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>hh_child</field>
        <controlField>hhwoc</controlField>
        <type>equality</type>
        <value>0</value>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>hh_child</field>
        <controlField>hhwc</controlField>
        <type>equality</type>
        <value>1</value>
      </constraint>
    </marginals>
  </target>
 
    <!-- Define conditions for person race Control#7 -->
    <!-- Five categories: hisp, nhw, nhb, nh_popsyn_other, nha -->
   <target>
    <marginals>
      <id>7</id>
      <description>TAZ Control: Number of persons by ethnicity</description>
      <geographyType>taz</geographyType>
      <controlType>simple</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>popsyn_race_id</field>
        <controlField>hisp</controlField>
        <type>equality</type>
        <value>1</value>
      </constraint>
      <constraint id="2">
        <importance>1000</importance>
        <field>popsyn_race_id</field>
        <controlField>nhw</controlField>
        <type>equality</type>
        <value>2</value>
      </constraint>
      <constraint id="3">
        <importance>1000</importance>
        <field>popsyn_race_id</field>
        <controlField>nhb</controlField>
        <type>equality</type>
        <value>3</value>
      </constraint>
      <constraint id="4">
        <importance>1000</importance>
        <field>popsyn_race_id</field>
        <controlField>nho_popsyn</controlField>
        <type>equality</type>
        <value>4</value>
      </constraint>
      <constraint id="5">
        <importance>1000</importance>
        <field>popsyn_race_id</field>
        <controlField>nha</controlField>
        <type>equality</type>
        <value>5</value>
      </constraint>
     </marginals>
  </target>
  
  <target>
    <!-- Define conditions for population Control#8 -->
    <marginals>
      <id>8</id>
      <description>Regional META Control: Total Regional Population</description>
      <geographyType>META</geographyType>
      <controlType>COUNT</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>wgtp</field>
        <controlField>pop_non_gq</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

</targets>
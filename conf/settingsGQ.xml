<?xml version="1.0" encoding="UTF-8"?>

<targets>
  <database>
    <server>sql2014a8</server>
    <type>MS_SQL</type>
    <!--<user></user>-->
    <password></password>
    <dbName>abm_13_2_3_dev </dbName>
  </database>

  <!-- Specify the PUMS data table names from which PUMA incidence tables are generated, as well as the field name for a unique identifier and the PUMS weight field name -->
  <pumsData>
    <idField>hhnum</idField>
    <pumaFieldName>puma</pumaFieldName>
    <metaFieldName>region</metaFieldName>
    <tazFieldName>taz13</tazFieldName>
    <mazFieldName>mgra13</mazFieldName>
    <weightField>WGTP</weightField>
    <hhTable>[popsyn_input].[hh]</hhTable>
    <persTable>[popsyn_input].[person]</persTable>
    <pumsHhTable>[popsyn_input].[hh]</pumsHhTable>
    <pumsHhIdField>hhnum</pumsHhIdField>
    <pumsPersTable>[popsyn_input].[person]</pumsPersTable>
    <maxExpansionFactor>50</maxExpansionFactor>
    <synpopOutputHhTableName>[popsyn].[synpop_hh]</synpopOutputHhTableName>
    <synpopOutputPersTableName>[popsyn].[synpop_person]</synpopOutputPersTableName>
    <outputHhAttributes>serialno, np, hincp, ten, bld, nwrkrs_esr, hhincAdj, adjinc, veh, hht, type, npf, hupac, GQFLAG, GQTYPE</outputHhAttributes>
    <outputPersAttributes>sporder, agep, sex, wkhp, esr, schg, employed, wkw, mil, schl, indp02, indp07, occp02, occp10, GQFLAG, GQTYPE</outputPersAttributes>
  </pumsData>

  <!-- Specify the table name and name of id field for the MAZ control totals table -->
  <mazControlsTable>
    <mazTable id="1">
      <table_name>[popsyn_input].[control_targets_mgra_sr13]</table_name>
      <id_field_name>mgra13</id_field_name>
      <aggregation_level>mgra13</aggregation_level>
    </mazTable>
  </mazControlsTable>

  <!-- Specify the table name and name of id field for the table of TAZ control totals that are not fields in the MAZ control total table -->
  <tazControlsTable>
  </tazControlsTable>

  <!-- Specify the table name, id field name, and aggregation level for each table of META control totals -->
  <metaControlsTables>
    <metaTable id="1">
      <table_name>[popsyn_input].[control_targets_region_sr13]</table_name>
      <id_field_name>region</id_field_name>
      <aggregation_level>puma</aggregation_level>
    </metaTable>
  </metaControlsTables>

  <target>
    <!-- Total GQ population in each TAZ Control#0 -->
    <marginals>
      <id>0</id>
      <description>MGRA Level Control: Total GQ Population</description>
      <totalHouseholdsControl>true</totalHouseholdsControl>
      <controlType>count</controlType>
      <geographyType>mgra13</geographyType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000000000</importance>
        <field>WGTP</field>
        <controlField>gq_noninst</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

  <target>
    <!-- Define conditions for University GQ population by type Control#1 -->
    <!-- One category: University -->
    <marginals>
      <id>1</id>
      <description>MGRA Control: Number of University GQ population</description>
      <geographyType>mgra13</geographyType>
      <controlType>count</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>GQTYPE</field>
        <controlField>gq_civ_college</controlField>
        <type>equality</type>
        <value>1</value>
      </constraint>
    </marginals>
  </target>

  <target>
    <!-- Define conditions for reginoal GQ population Control#2 -->
    <marginals>
      <id>2</id>
      <description>Regional META Control: Total Regional GQ Population</description>
      <geographyType>META</geographyType>
      <controlType>count</controlType>
      <table>[popsyn_input].[person]</table>
      <constraint id="1">
        <importance>1000</importance>
        <field>WGTP</field>
        <controlField>gq_noninst</controlField>
        <type>interval</type>
        <lo_value>0</lo_value>
        <lo_type>open</lo_type>
        <hi_value>infinity</hi_value>
        <hi_type>open</hi_type>
      </constraint>
    </marginals>
  </target>

</targets>